<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>(一).MySQL数据库基础知识和基础操作 | 星脉</title><meta name="description" content="(一).MySQL数据库基础知识和基础操作"><meta name="keywords" content="MySQL"><meta name="author" content="wangguangatap"><meta name="copyright" content="wangguangatap"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="(一).MySQL数据库基础知识和基础操作"><meta name="twitter:description" content="(一).MySQL数据库基础知识和基础操作"><meta name="twitter:image" content="https://wangguangatap.github.io/img/mysql/mysql.jpeg"><meta property="og:type" content="article"><meta property="og:title" content="(一).MySQL数据库基础知识和基础操作"><meta property="og:url" content="https://wangguangatap.github.io/2020/01/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"><meta property="og:site_name" content="星脉"><meta property="og:description" content="(一).MySQL数据库基础知识和基础操作"><meta property="og:image" content="https://wangguangatap.github.io/img/mysql/mysql.jpeg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://wangguangatap.github.io/2020/01/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"><link rel="prev" title="Go语言反射" href="https://wangguangatap.github.io/2020/01/27/Go%E8%AF%AD%E8%A8%80%E5%8F%8D%E5%B0%84/"><link rel="next" title="(二).MySQL学习笔记" href="https://wangguangatap.github.io/2020/01/27/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">星脉</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">71</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">26</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#数据库基础知识"><span class="toc_mobile_items-text">数据库基础知识</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、数据库简介"><span class="toc_mobile_items-text">一、数据库简介</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1、为什么需要数据库"><span class="toc_mobile_items-text">1.1、为什么需要数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2、什么是数据库"><span class="toc_mobile_items-text">1.2、什么是数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3、什么是数据库系统"><span class="toc_mobile_items-text">1.3、什么是数据库系统</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-4、目前数据库分类"><span class="toc_mobile_items-text">1.4、目前数据库分类</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、关系型数据库"><span class="toc_mobile_items-text">二、关系型数据库</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1、关系型数据库的介绍"><span class="toc_mobile_items-text">2.1、关系型数据库的介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-1-表"><span class="toc_mobile_items-text">2.1.1 表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-2-列"><span class="toc_mobile_items-text">2.1.2 列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-3-数据类型"><span class="toc_mobile_items-text">2.1.3 数据类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-4-行"><span class="toc_mobile_items-text">2.1.4 行</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-5-主键"><span class="toc_mobile_items-text">2.1.5 主键</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、安装和卸载-MySQL"><span class="toc_mobile_items-text">三、安装和卸载 MySQL</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1-安装"><span class="toc_mobile_items-text">3.1 安装</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2-卸载"><span class="toc_mobile_items-text">3.2 卸载</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3-配置环境变量"><span class="toc_mobile_items-text">3.3 配置环境变量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-4-登陆"><span class="toc_mobile_items-text">3.4 登陆</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-5-启动和停止-mysql-服务"><span class="toc_mobile_items-text">3.5 启动和停止 mysql 服务</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、安装-Navicat"><span class="toc_mobile_items-text">四、安装 Navicat</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-安装并注册"><span class="toc_mobile_items-text">4.1 安装并注册</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-创建连接"><span class="toc_mobile_items-text">4.2 创建连接</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#数据库的操作"><span class="toc_mobile_items-text">数据库的操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、SQL-语言"><span class="toc_mobile_items-text">一、SQL 语言</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-什么是-SQL"><span class="toc_mobile_items-text">1.1 什么是 SQL</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-SQL-的作用"><span class="toc_mobile_items-text">1.2 SQL 的作用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3-SQL-标准"><span class="toc_mobile_items-text">1.3 SQL 标准</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-4-SQL-的语法"><span class="toc_mobile_items-text">1.4 SQL 的语法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-5-SQL99-标准的四大分类-："><span class="toc_mobile_items-text">1.5 SQL99 标准的四大分类 ：</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、-数据库的基本操作"><span class="toc_mobile_items-text">二、 数据库的基本操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1-在终端连接mysql数据库"><span class="toc_mobile_items-text">2.1 在终端连接mysql数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2-查看数据库版本"><span class="toc_mobile_items-text">2.2 查看数据库版本</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-3-查看当前时间"><span class="toc_mobile_items-text">2.3 查看当前时间</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-4-退出mysql数据库的连接"><span class="toc_mobile_items-text">2.4 退出mysql数据库的连接</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-5-显示所有的数据库"><span class="toc_mobile_items-text">2.5 显示所有的数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-6-创建数据库"><span class="toc_mobile_items-text">2.6 创建数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-7-切换到要操作的数据库"><span class="toc_mobile_items-text">2.7 切换到要操作的数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-8-查看当前选择的数据库"><span class="toc_mobile_items-text">2.8 查看当前选择的数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-9-删除数据库"><span class="toc_mobile_items-text">2.9 删除数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-10-扩展-MySQL-添加用户、删除用户与授权"><span class="toc_mobile_items-text">2.10 [扩展]MySQL 添加用户、删除用户与授权</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-创建用户"><span class="toc_mobile_items-text">1.创建用户</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-为用户授权"><span class="toc_mobile_items-text">2.为用户授权</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、MySQL-数据类型"><span class="toc_mobile_items-text">三、MySQL 数据类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1-数值类型"><span class="toc_mobile_items-text">3.1 数值类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2-日期和时间类型"><span class="toc_mobile_items-text">3.2 日期和时间类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3-字符串类型"><span class="toc_mobile_items-text">3.3 字符串类型</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、表的基本操作"><span class="toc_mobile_items-text">四、表的基本操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-查看当前数据库中的所有表"><span class="toc_mobile_items-text">4.1 查看当前数据库中的所有表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-创建表"><span class="toc_mobile_items-text">4.2 创建表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3-查看表结构"><span class="toc_mobile_items-text">4.3 查看表结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-查看表的创建语句"><span class="toc_mobile_items-text">4.4 查看表的创建语句</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-5-修改表"><span class="toc_mobile_items-text">4.5 修改表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-6-删除表"><span class="toc_mobile_items-text">4.6 删除表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-7-扩展-复制表中的数据-仅复制数据不复制表的结构"><span class="toc_mobile_items-text">4.7 [扩展]复制表中的数据(仅复制数据不复制表的结构)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#五、操纵表中的数据"><span class="toc_mobile_items-text">五、操纵表中的数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-1-查询数据"><span class="toc_mobile_items-text">5.1 查询数据</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-2-添加数据"><span class="toc_mobile_items-text">5.2 添加数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-1-全列插入"><span class="toc_mobile_items-text">5.2.1 全列插入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-2-缺省插入"><span class="toc_mobile_items-text">5.2.2 缺省插入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-3-同时插入多条数据"><span class="toc_mobile_items-text">5.2.3 同时插入多条数据</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-3-修改数据-更新数据"><span class="toc_mobile_items-text">5.3 修改数据(更新数据)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-删除数据"><span class="toc_mobile_items-text">5.4 删除数据</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#六、约束-constraint"><span class="toc_mobile_items-text">六、约束(constraint)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-1-默认值：default"><span class="toc_mobile_items-text">6.1 默认值：default</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-2-非空约束：not-null"><span class="toc_mobile_items-text">6.2 非空约束：not null</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-3-唯一性约束：unique"><span class="toc_mobile_items-text">6.3 唯一性约束：unique</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-4-主键约束：primary-key。"><span class="toc_mobile_items-text">6.4 主键约束：primary key。</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-5-外键约束：foreign-key，"><span class="toc_mobile_items-text">6.5 外键约束：foreign key，</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-5-1-外键"><span class="toc_mobile_items-text">6.5.1 外键</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-5-2-外键的设置"><span class="toc_mobile_items-text">6.5.2 外键的设置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-5-3-外键的级联操作"><span class="toc_mobile_items-text">6.5.3 外键的级联操作</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库基础知识"><span class="toc-text">数据库基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、数据库简介"><span class="toc-text">一、数据库简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1、为什么需要数据库"><span class="toc-text">1.1、为什么需要数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2、什么是数据库"><span class="toc-text">1.2、什么是数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3、什么是数据库系统"><span class="toc-text">1.3、什么是数据库系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4、目前数据库分类"><span class="toc-text">1.4、目前数据库分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、关系型数据库"><span class="toc-text">二、关系型数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1、关系型数据库的介绍"><span class="toc-text">2.1、关系型数据库的介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-表"><span class="toc-text">2.1.1 表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-列"><span class="toc-text">2.1.2 列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-数据类型"><span class="toc-text">2.1.3 数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-行"><span class="toc-text">2.1.4 行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-主键"><span class="toc-text">2.1.5 主键</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、安装和卸载-MySQL"><span class="toc-text">三、安装和卸载 MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-安装"><span class="toc-text">3.1 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-卸载"><span class="toc-text">3.2 卸载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-配置环境变量"><span class="toc-text">3.3 配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-登陆"><span class="toc-text">3.4 登陆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-启动和停止-mysql-服务"><span class="toc-text">3.5 启动和停止 mysql 服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、安装-Navicat"><span class="toc-text">四、安装 Navicat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-安装并注册"><span class="toc-text">4.1 安装并注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-创建连接"><span class="toc-text">4.2 创建连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库的操作"><span class="toc-text">数据库的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、SQL-语言"><span class="toc-text">一、SQL 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-什么是-SQL"><span class="toc-text">1.1 什么是 SQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-SQL-的作用"><span class="toc-text">1.2 SQL 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-SQL-标准"><span class="toc-text">1.3 SQL 标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-SQL-的语法"><span class="toc-text">1.4 SQL 的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-SQL99-标准的四大分类-："><span class="toc-text">1.5 SQL99 标准的四大分类 ：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、-数据库的基本操作"><span class="toc-text">二、 数据库的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-在终端连接mysql数据库"><span class="toc-text">2.1 在终端连接mysql数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-查看数据库版本"><span class="toc-text">2.2 查看数据库版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-查看当前时间"><span class="toc-text">2.3 查看当前时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-退出mysql数据库的连接"><span class="toc-text">2.4 退出mysql数据库的连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-显示所有的数据库"><span class="toc-text">2.5 显示所有的数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-创建数据库"><span class="toc-text">2.6 创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-切换到要操作的数据库"><span class="toc-text">2.7 切换到要操作的数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-查看当前选择的数据库"><span class="toc-text">2.8 查看当前选择的数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-删除数据库"><span class="toc-text">2.9 删除数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-扩展-MySQL-添加用户、删除用户与授权"><span class="toc-text">2.10 [扩展]MySQL 添加用户、删除用户与授权</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-创建用户"><span class="toc-text">1.创建用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-为用户授权"><span class="toc-text">2.为用户授权</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、MySQL-数据类型"><span class="toc-text">三、MySQL 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-数值类型"><span class="toc-text">3.1 数值类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-日期和时间类型"><span class="toc-text">3.2 日期和时间类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-字符串类型"><span class="toc-text">3.3 字符串类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、表的基本操作"><span class="toc-text">四、表的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-查看当前数据库中的所有表"><span class="toc-text">4.1 查看当前数据库中的所有表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-创建表"><span class="toc-text">4.2 创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-查看表结构"><span class="toc-text">4.3 查看表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-查看表的创建语句"><span class="toc-text">4.4 查看表的创建语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-修改表"><span class="toc-text">4.5 修改表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-删除表"><span class="toc-text">4.6 删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-扩展-复制表中的数据-仅复制数据不复制表的结构"><span class="toc-text">4.7 [扩展]复制表中的数据(仅复制数据不复制表的结构)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、操纵表中的数据"><span class="toc-text">五、操纵表中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-查询数据"><span class="toc-text">5.1 查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-添加数据"><span class="toc-text">5.2 添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-全列插入"><span class="toc-text">5.2.1 全列插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-缺省插入"><span class="toc-text">5.2.2 缺省插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3-同时插入多条数据"><span class="toc-text">5.2.3 同时插入多条数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-修改数据-更新数据"><span class="toc-text">5.3 修改数据(更新数据)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-删除数据"><span class="toc-text">5.4 删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、约束-constraint"><span class="toc-text">六、约束(constraint)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-默认值：default"><span class="toc-text">6.1 默认值：default</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-非空约束：not-null"><span class="toc-text">6.2 非空约束：not null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-唯一性约束：unique"><span class="toc-text">6.3 唯一性约束：unique</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-主键约束：primary-key。"><span class="toc-text">6.4 主键约束：primary key。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-外键约束：foreign-key，"><span class="toc-text">6.5 外键约束：foreign key，</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-1-外键"><span class="toc-text">6.5.1 外键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-2-外键的设置"><span class="toc-text">6.5.2 外键的设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-外键的级联操作"><span class="toc-text">6.5.3 外键的级联操作</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(/img/mysql/mysql.jpeg)"><div id="post-info"><div id="post-title"><div class="posttitle">(一).MySQL数据库基础知识和基础操作</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-01-27<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2021-04-16</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/MySQL/">MySQL</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="数据库基础知识"></a>数据库基础知识</h1><h2 id="一、数据库简介"><a href="#一、数据库简介" class="headerlink" title="一、数据库简介"></a>一、数据库简介</h2><h3 id="1-1、为什么需要数据库"><a href="#1-1、为什么需要数据库" class="headerlink" title="1.1、为什么需要数据库"></a>1.1、为什么需要数据库</h3><p>人类时刻有记录一些资料的需求, 最初的结绳记事</p>
<p>随着人类的发展, 发明了文字, 数字等符号, 这些符号可以更好的记录生活中发生的各种事件.但是如何使记录更好的保存是个问题.</p>
<p>从最初的龟壳到后来的纸张, 都用来记录这些信息. 慢慢到更现代化的各种磁盘等,随着信息的增长, 对数据存储的要求越来越高. 如何更加有效和快捷的处理这些信息成为了一个<br>难题.</p>
<p><a href="/img/mysql/mysql1.jpeg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/mysql1.jpeg" class="lazyload"></a></p>
<p><a href="/img/mysql/mysql3.jpeg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/mysql3.jpeg" class="lazyload"></a></p>
<p><a href="/img/mysql/mysql4.jpeg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/mysql4.jpeg" class="lazyload"></a></p>
<p><strong>数据库的出现, 很好的解决了数据的存储效率和读取效率.</strong></p>
<hr>
<h3 id="1-2、什么是数据库"><a href="#1-2、什么是数据库" class="headerlink" title="1.2、什么是数据库"></a>1.2、什么是数据库</h3><p>数据库(database)就是存储数据的仓库。为了方便数据的存储和管理，将数据按照特定的规律存储在磁盘上。通过数据库管理系统，有效地组织和管理存储在数据库中的数据。</p>
<p><strong>数据库 database</strong>是按照数据结构来组织、存储和管理数据的仓库(通常是一个文件或一组文件)。</p>
<p>理解数据库的一种最简单的办法就是将其想象为一个文件柜，此文件柜是一个存放数据的物理位置。</p>
<blockquote>
<p>注意：有些人通常使用<strong>数据库</strong>这个术语来代表他们使用的<strong>数据库软件</strong>，这是不正确的。确切的说，数据库软件应称为<strong>DBMS(数据库管理系统)</strong>。<strong>数据库</strong>是通过<strong>DBMS</strong>创建和操纵的容器。<strong>数据库</strong>可以是保存在硬件设备上的文件，但也可以不是。对我们来说<strong>数据库</strong>究竟是文件还是其他什么东西并不重要，因为我们并不直接访问<strong>数据库</strong>，我们使用的是<strong>DBMS</strong>，它替我们访问数据库。</p>
</blockquote>
<p><a href="/img/mysql/mysql6.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/mysql6.jpg" class="lazyload"></a></p>
<h3 id="1-3、什么是数据库系统"><a href="#1-3、什么是数据库系统" class="headerlink" title="1.3、什么是数据库系统"></a>1.3、什么是数据库系统</h3><p>数据库系统和数据库不是一个概念，数据库系统(DBS),比数据库大很多，由数据库、 数据库管理系统、应用开发工具构成。</p>
<h3 id="1-4、目前数据库分类"><a href="#1-4、目前数据库分类" class="headerlink" title="1.4、目前数据库分类"></a>1.4、目前数据库分类</h3><p>而在当今的互联网中，最常见的数据库模型主要是两种，即<strong>关系型数据库</strong>和<strong>非关系型数据库。</strong></p>
<p><a href="/img/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93.png" class="lazyload"></a></p>
<blockquote>
<p>其他数据库：</p>
<p>​ 层次结构模型</p>
<p>​ 网状结构模型</p>
<p>​ 关系型数据库(以行和列的结构形式，将数据展示，以二维表的形式存储数据)</p>
<p>​ 面向对象数据库</p>
</blockquote>
<h2 id="二、关系型数据库"><a href="#二、关系型数据库" class="headerlink" title="二、关系型数据库"></a>二、关系型数据库</h2><h3 id="2-1、关系型数据库的介绍"><a href="#2-1、关系型数据库的介绍" class="headerlink" title="2.1、关系型数据库的介绍"></a>2.1、关系型数据库的介绍</h3><p>关系型数据库模型是把复杂的数据结构归结为简单的二元关系(即二维表格形式)。</p>
<p>在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。</p>
<p>关系型数据库诞生 40 多年了，从理论产生发展到现实产品，例如：Oracle 和 MySQL，Oracle 在数据库领域上升到霸主地位，形成每年高达数百亿美元的庞大产业市场。MySql 数据库在中小企业和免费市场具有绝对地位.</p>
<h4 id="2-1-1-表"><a href="#2-1-1-表" class="headerlink" title="2.1.1 表"></a>2.1.1 表</h4><blockquote>
<blockquote>
<p><strong>表(table)</strong>是数据库中存储数据的基本单位。</p>
</blockquote>
<p><a href="/img/mysql/emp_table.jpeg" data-fancybox="group" data-caption="img" class="fancybox"><img alt="img" title="img" data-src="/img/mysql/emp_table.jpeg" class="lazyload"></a></p>
</blockquote>
<h4 id="2-1-2-列"><a href="#2-1-2-列" class="headerlink" title="2.1.2 列"></a>2.1.2 列</h4><blockquote>
<p><strong>列(column)</strong>表中的一个字段。所有的表都是由一个或多个列组成。</p>
</blockquote>
<h4 id="2-1-3-数据类型"><a href="#2-1-3-数据类型" class="headerlink" title="2.1.3 数据类型"></a>2.1.3 数据类型</h4><blockquote>
<p><strong>数据类型(datatype)</strong>每个列都有相应的数据类型，用来限制该列存储的数据。</p>
</blockquote>
<h4 id="2-1-4-行"><a href="#2-1-4-行" class="headerlink" title="2.1.4 行"></a>2.1.4 行</h4><blockquote>
<p>行(row)表中的一个(行)记录。</p>
</blockquote>
<p>表中的数据是按行存储的，所保存的每个记录存储在自己的行内，如果将表想象为网格，网格中垂直的列为表列，水平行为表行。</p>
<h4 id="2-1-5-主键"><a href="#2-1-5-主键" class="headerlink" title="2.1.5 主键"></a>2.1.5 主键</h4><blockquote>
<p>主键(primary key)一列(或一组列)，其值能够唯一区分表中的每一行。</p>
</blockquote>
<p>表中每一行都应该有可以唯一标识自己的一列(或一组列)。一个顾客表中可以使用顾客编码列，而订单表可以使用订单 ID 等。一个表中没有主键的话，更新或删除表中特定行很困难，因为没有安全的方法保证只涉及相关的行。</p>
<p><strong>主键的规则</strong>表中的任何列都可以作为主键，只要它满足一下条件：</p>
<ul>
<li><p>任何两行都不具有相同的主键值(每一行的主键值是唯一的)。</p>
</li>
<li><p>每个行都必须具有一个主键值(主键不允许 null 值)</p>
<p><strong>主键的好习惯</strong>除了强制的规则外，应该坚持的几个普遍认可的好习惯：</p>
</li>
<li><p>不更新主键列中的值</p>
</li>
<li><p>不重用主键列的值</p>
</li>
<li><p>不在主键列中使用可能会更改的值</p>
</li>
</ul>
<h2 id="三、安装和卸载-MySQL"><a href="#三、安装和卸载-MySQL" class="headerlink" title="三、安装和卸载 MySQL"></a>三、安装和卸载 MySQL</h2><h3 id="3-1-安装"><a href="#3-1-安装" class="headerlink" title="3.1 安装"></a>3.1 安装</h3><p>详见安装文档</p>
<h3 id="3-2-卸载"><a href="#3-2-卸载" class="headerlink" title="3.2 卸载"></a>3.2 卸载</h3><p>详见卸载文档</p>
<p>​ 关闭服务：</p>
<h3 id="3-3-配置环境变量"><a href="#3-3-配置环境变量" class="headerlink" title="3.3 配置环境变量"></a>3.3 配置环境变量</h3><p><a href="/img/mysql/01%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" data-fancybox="group" data-caption="01配置环境变量" class="fancybox"><img alt="01配置环境变量" title="01配置环境变量" data-src="/img/mysql/01%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" class="lazyload"></a></p>
<h3 id="3-4-登陆"><a href="#3-4-登陆" class="headerlink" title="3.4 登陆"></a>3.4 登陆</h3><p>A：因为配置了环境变量，可以直接使用命令行终端，输入以下内容：</p>
<p>mysql -u root -p</p>
<p>输入密码</p>
<p><a href="/img/mysql/02%E7%99%BB%E9%99%86.jpg" data-fancybox="group" data-caption="02登陆" class="fancybox"><img alt="02登陆" title="02登陆" data-src="/img/mysql/02%E7%99%BB%E9%99%86.jpg" class="lazyload"></a></p>
<blockquote>
<p>-u：后面跟随用户名</p>
<p>-p：后面跟随密码</p>
<p>-h：后面跟随 IP</p>
</blockquote>
<p>B：也可以直接使用 mysql 命令行：</p>
<p><a href="/img/mysql/03%E7%99%BB%E9%99%86.jpg" data-fancybox="group" data-caption="03登陆" class="fancybox"><img alt="03登陆" title="03登陆" data-src="/img/mysql/03%E7%99%BB%E9%99%86.jpg" class="lazyload"></a></p>
<h3 id="3-5-启动和停止-mysql-服务"><a href="#3-5-启动和停止-mysql-服务" class="headerlink" title="3.5 启动和停止 mysql 服务"></a>3.5 启动和停止 mysql 服务</h3><p>dos 命令行：(需要以管理员的方式运行 cmd.exe)</p>
<p>​ 输入：net stop mysql</p>
<p>​ 输入：net start mysql</p>
<p><a href="/img/mysql/05%E5%81%9C%E6%AD%A2%E5%92%8C%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1.jpg" data-fancybox="group" data-caption=" 05停止和启动服务" class="fancybox"><img alt=" 05停止和启动服务" title=" 05停止和启动服务" data-src="/img/mysql/05%E5%81%9C%E6%AD%A2%E5%92%8C%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1.jpg" class="lazyload"></a></p>
<p>或者通过操作界面：我的电脑-管理-服务-开启和停止 mysql 服务。</p>
<h2 id="四、安装-Navicat"><a href="#四、安装-Navicat" class="headerlink" title="四、安装 Navicat"></a>四、安装 Navicat</h2><h3 id="4-1-安装并注册"><a href="#4-1-安装并注册" class="headerlink" title="4.1 安装并注册"></a>4.1 安装并注册</h3><p><a href="/img/mysql/05%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.jpg" data-fancybox="group" data-caption="05管理工具" class="fancybox"><img alt="05管理工具" title="05管理工具" data-src="/img/mysql/05%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.jpg" class="lazyload"></a></p>
<h3 id="4-2-创建连接"><a href="#4-2-创建连接" class="headerlink" title="4.2 创建连接"></a>4.2 创建连接</h3><p><a href="/img/mysql/04%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.jpg" data-fancybox="group" data-caption="04管理工具" class="fancybox"><img alt="04管理工具" title="04管理工具" data-src="/img/mysql/04%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.jpg" class="lazyload"></a></p>
<p><a href="/img/mysql/06%E4%BD%BF%E7%94%A8navicat.jpg" data-fancybox="group" data-caption="06使用navicat" class="fancybox"><img alt="06使用navicat" title="06使用navicat" data-src="/img/mysql/06%E4%BD%BF%E7%94%A8navicat.jpg" class="lazyload"></a></p>
<p>[扩展]数据库的几个名词</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DB：是指datebase(数据库)</span><br><span class="line">	数据库是存储数据的一个集合，数据库中通常使用数据表等组成，而数据表是由数据的字段和数据的值等信息组成。</span><br><span class="line">DBMS:是指datebase mangement systerm(数据库管理系统)</span><br><span class="line">	它是操作数据库和管理数据库的一个系统，比如mysql、sqlserver等都是属于数据库管理软件，人们通过这些系统或者工具来管理数据库内的数据。</span><br><span class="line">DBS:是指datebase systerm (数据库系统)</span><br><span class="line">	数据库系统又数据库和数据库管理软件等组成，数据库是一个逻辑上的存储数据的概念，而对应的是实体是数据库管理软件存储存储在硬盘上的数据库，所以数据库系统包含数据库和数据库管理软件。</span><br></pre></td></tr></table></figure></div>

<p>理解数据库：</p>
<p>我们现在所说的数据库泛指关系型数据库管理系统(RDBMS-Relatitonal database management system)，即数据库服务器。</p>
<p>当我们安装了数据库服务器后，就可以在数据库服务器中创建数据库，每个数据库中还可以包含多张表。</p>
<p>数据库表就是一个多行多列的表格。在创建表时，需要制定表的列数，以及列名称，烈性等信息。而不用制定表格的行数，行数是没有上限的。</p>
<h1 id="数据库的操作"><a href="#数据库的操作" class="headerlink" title="数据库的操作"></a>数据库的操作</h1><h2 id="一、SQL-语言"><a href="#一、SQL-语言" class="headerlink" title="一、SQL 语言"></a>一、SQL 语言</h2><h3 id="1-1-什么是-SQL"><a href="#1-1-什么是-SQL" class="headerlink" title="1.1 什么是 SQL"></a>1.1 什么是 SQL</h3><p>SQL 是结构化查询语言(Structured Query Language)</p>
<h3 id="1-2-SQL-的作用"><a href="#1-2-SQL-的作用" class="headerlink" title="1.2 SQL 的作用"></a>1.2 SQL 的作用</h3><p>客户端使用 SQL 来操作服务器</p>
<p>​ 启动 mysql，会连接到服务器后，就可以使用 sql 来操作服务器了</p>
<p>​ 将来会使用 python 程序(也可以是其他程序，比如 java)链接服务器，然后使用 sql 来操作服务器</p>
<h3 id="1-3-SQL-标准"><a href="#1-3-SQL-标准" class="headerlink" title="1.3 SQL 标准"></a>1.3 SQL 标准</h3><p>由国际标准组织(ISO)制定的，对 DBMS 的统一操作方式(例如相同的语句可以操作：mysql，oracle 等)。</p>
<p>例如 SQL99，即 1999 年制定的标准</p>
<blockquote>
<p>SQL99</p>
<p>(1)是操作所有关系型数据库的规则<br>(2)是第四代语言<br>(3)是一种结构化查询语言<br>(4)只需发出合法合理的命令，就有对应的结果显示</p>
</blockquote>
<p>注意，某种 DBMS 不只会支持 SQL 标准，而且还会有一些自己独有的语法，比如 limit 语句只在 MySQL 中可以使用</p>
<h3 id="1-4-SQL-的语法"><a href="#1-4-SQL-的语法" class="headerlink" title="1.4 SQL 的语法"></a>1.4 SQL 的语法</h3><ol>
<li><p>SQL 语句可以在单行或多行书写，以分号结尾</p>
<p>​ 有些时候可以不以分号结尾，比如代码中</p>
</li>
<li><p>可以使用空格和缩进来增强语句的可读性</p>
</li>
<li><p>MySQL 不区分大小写，建议使用大写</p>
</li>
</ol>
<h3 id="1-5-SQL99-标准的四大分类-："><a href="#1-5-SQL99-标准的四大分类-：" class="headerlink" title="1.5 SQL99 标准的四大分类 ："></a>1.5 SQL99 标准的四大分类 ：</h3><ol>
<li><p>DDL 数据定义语言(data definition language)</p>
<p>​ create table,alter table，drop table，truncate table 。。</p>
</li>
<li><p>DML 数据操作语言(Data Manipulation Language)</p>
<p>​ insert,update,delete</p>
</li>
<li><p>DQL 数据查询语言(data query language)</p>
<p>select</p>
<p>其实 DQL 也从 DML 中分离出来的。</p>
</li>
<li><p>DCL 数据控制语言(Data Control Language)</p>
<p>​ grant 权限 to scott，revoke 权限 from scott 。。。</p>
</li>
<li><p>DCL(事务控制语言)：commit，rollback，rollback to savepoint 。。。</p>
</li>
</ol>
<h2 id="二、-数据库的基本操作"><a href="#二、-数据库的基本操作" class="headerlink" title="二、 数据库的基本操作"></a>二、 数据库的基本操作</h2><h3 id="2-1-在终端连接mysql数据库"><a href="#2-1-在终端连接mysql数据库" class="headerlink" title="2.1 在终端连接mysql数据库"></a>2.1 在终端连接<code>mysql</code>数据库</h3><p>在终端输入如下命令:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></div>

<p>回车后输入密码.</p>
<h3 id="2-2-查看数据库版本"><a href="#2-2-查看数据库版本" class="headerlink" title="2.2 查看数据库版本"></a>2.2 查看数据库版本</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select version();</span><br></pre></td></tr></table></figure></div>

<p>注意:输入命令的时候不要忘记后面的分号</p>
<h3 id="2-3-查看当前时间"><a href="#2-3-查看当前时间" class="headerlink" title="2.3 查看当前时间"></a>2.3 查看当前时间</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select now();</span><br></pre></td></tr></table></figure></div>

<h3 id="2-4-退出mysql数据库的连接"><a href="#2-4-退出mysql数据库的连接" class="headerlink" title="2.4 退出mysql数据库的连接"></a>2.4 退出<code>mysql</code>数据库的连接</h3><p><code>exit</code>或<code>quit</code></p>
<hr>
<p><strong>以下操作都是在连接数据库之后才能做的操作</strong></p>
<p>注意命令结束的时候一定要带分号.</p>
<h3 id="2-5-显示所有的数据库"><a href="#2-5-显示所有的数据库" class="headerlink" title="2.5 显示所有的数据库"></a>2.5 显示所有的数据库</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br></pre></td></tr></table></figure></div>

<p>注意: <code>databases</code>后面有个<code>s</code></p>
<h3 id="2-6-创建数据库"><a href="#2-6-创建数据库" class="headerlink" title="2.6 创建数据库"></a>2.6 创建数据库</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database [if not exists]数据库名 [default charset utf8 collate utf8_general_ci];</span><br></pre></td></tr></table></figure></div>

<p>可以简写：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database 数据库名 character set utf-8;</span><br></pre></td></tr></table></figure></div>

<p>说明:</p>
<ol>
<li>数据库名不要使用中文</li>
<li>由于数据库中将来会存储一些<code>非ascii</code>字符, 所以务必指定字符编码, 一般都是指定<code>utf-8</code>编码</li>
<li>CHARSET 选择 utf8<br>COLLATION 选择 utf8_general_ci</li>
<li>mysql 中字符集是 utf8，不是 utf-8。</li>
</ol>
<h3 id="2-7-切换到要操作的数据库"><a href="#2-7-切换到要操作的数据库" class="headerlink" title="2.7 切换到要操作的数据库"></a>2.7 切换到要操作的数据库</h3><p>若要操作数据库中的内容, 需要先切换到要操作的数据库</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure></div>

<h3 id="2-8-查看当前选择的数据库"><a href="#2-8-查看当前选择的数据库" class="headerlink" title="2.8 查看当前选择的数据库"></a>2.8 查看当前选择的数据库</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure></div>

<h3 id="2-9-删除数据库"><a href="#2-9-删除数据库" class="headerlink" title="2.9 删除数据库"></a>2.9 删除数据库</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop database [if exists]数据库名;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="2-10-扩展-MySQL-添加用户、删除用户与授权"><a href="#2-10-扩展-MySQL-添加用户、删除用户与授权" class="headerlink" title="2.10 [扩展]MySQL 添加用户、删除用户与授权"></a>2.10 [扩展]MySQL 添加用户、删除用户与授权</h3><p>DCL 数据控制语言(Data Control Language)(了解)</p>
<p>通常一个项目创建一个用户。一个项目对应的数据库只有一个，这个用户只能对这个数据库有权限，无法对其他数据库进行操作。</p>
<p>MySql 中添加用户,新建数据库,用户授权,删除用户,修改密码(注意每行后边都跟个;表示一个命令语句结束):</p>
<h4 id="1-创建用户"><a href="#1-创建用户" class="headerlink" title="1.创建用户"></a>1.创建用户</h4><p>A：先使用 root 账户进行登录</p>
<p>登录 MYSQL：</p>
<p>@&gt;mysql -u root -p</p>
<p>@&gt;密码:hanru1314</p>
<p>B：创建用户：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE USER &#39;username&#39;@&#39;IP地址&#39; [IDENTIFIED BY &#39;PASSWORD&#39;] 其中密码是可选项；</span><br><span class="line">	用户只能在指定的IP地址上登录</span><br><span class="line">CREATE USER &#39;username&#39;@&#39;%&#39; [IDENTIFIED BY &#39;PASSWORD&#39;] 其中密码是可选项；</span><br><span class="line">	用户可以在任意IP地址上登录</span><br></pre></td></tr></table></figure></div>

<p>例如：</p>
<p>create user “test”@”localhost” identified by “1234”;</p>
<p>CREATE USER ‘john’@’192.168.189.71’ IDENTIFIED BY “123”;</p>
<p>C：然后登录一下：</p>
<p>mysql&gt;exit;</p>
<p>@&gt;mysql -u ruby -p</p>
<p>@&gt;输入密码</p>
<p>mysql&gt;登录成功</p>
<h4 id="2-为用户授权"><a href="#2-为用户授权" class="headerlink" title="2.为用户授权"></a>2.为用户授权</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">授权格式：grant 权限 on 数据库.* to 用户名@登录主机 identified by &quot;密码&quot;;</span><br></pre></td></tr></table></figure></div>

<p>2.1 登录 MYSQL(有 ROOT 权限)，这里以 ROOT 身份登录：</p>
<p>@&gt;mysql -u root -p</p>
<p>@&gt;密码</p>
<p>2.2 首先为用户创建一个数据库(testDB)：</p>
<p>mysql&gt;CREATE DATABASE<code>testDB</code>DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</p>
<p>2.3 授权 test 用户拥有 testDB 数据库的所有权限(某个数据库的所有权限)：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">格式：<span class="keyword">grant</span> 权限 <span class="keyword">on</span> 数据库.* <span class="keyword">to</span> 用户名@登录主机 <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">"密码"</span>;</span><br></pre></td></tr></table></figure></div>

<p>grant all privileges on <em>.</em> to ‘root’@’%’ identified by ‘123456’;</p>
<p>mysql&gt;grant all privileges on testDB.* to test@localhost identified by ‘1234’;</p>
<p>mysql&gt;flush privileges;//刷新系统权限表</p>
<p>2.4 如果想指定部分权限给一用户，可以这样来写:</p>
<p>mysql&gt;grant select,update on testDB.* to test@localhost identified by ‘1234’;</p>
<p>mysql&gt;flush privileges; //刷新系统权限表</p>
<p>2.5 授权 test 用户拥有所有数据库的某些权限：</p>
<p>mysql&gt;grant select,delete,update,create,drop on_._to test@”%” identified by “1234”;</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;test用户对所有数据库都有select,delete,update,create,drop 权限。</span><br></pre></td></tr></table></figure></div>

<p>//@”%” 表示对所有非本地主机授权，不包括 localhost。(localhost 地址设为 127.0.0.1，如果设为真实的本地地址，不知道是否可以，没有验证。)</p>
<p>//对 localhost 授权：加上一句 grant all privileges on testDB.* to test@localhost identified by ‘1234’;即可。</p>
<p><strong>3.撤销权限</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">revoke 权限1，权限2.。。。on 数据库.* from 用户名@IP地址;</span><br></pre></td></tr></table></figure></div>

<p>撤销指定用户在指定数据库上的执行权限。</p>
<p><strong>4. 查看权限</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show grants for 用户名@IP地址;</span><br></pre></td></tr></table></figure></div>

<p><strong>5. 删除用户</strong></p>
<p>@&gt;mysql -u root -p</p>
<p>@&gt;密码</p>
<p>删除账户及权限：&gt;drop user 用户名@’%’;</p>
<p>&gt;drop user 用户名@ localhost;</p>
<h2 id="三、MySQL-数据类型"><a href="#三、MySQL-数据类型" class="headerlink" title="三、MySQL 数据类型"></a>三、MySQL 数据类型</h2><p>MySQL 中定义数据字段的类型对你数据库的优化是非常重要的。 MySQL 支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p>
<h3 id="3-1-数值类型"><a href="#3-1-数值类型" class="headerlink" title="3.1 数值类型"></a>3.1 数值类型</h3><p>MySQL 支持所有标准 SQL 数值数据类型。 这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL 和 NUMERIC)，以及近似数值数据类型(FLOAT、REAL 和 DOUBLE PRECISION)。 关键字 INT 是 INTEGER 的同义词，关键字 DEC 是 DECIMAL 的同义词。 BIT 数据类型保存位字段值，并且支持 MyISAM、MEMORY、InnoDB 和 BDB 表。 作为 SQL 标准的扩展，MySQL 也支持整数类型 TINYINT、MEDIUMINT 和 BIGINT。下面的表显示了需要的每个整数类型的存储和范围。</p>
<p><a href="/img/mysql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" class="lazyload"></a></p>
<p><strong>在上面表中的类型中, 最常用的是 2 中类型: int(整数)和 decimal(浮点数).</strong></p>
<h3 id="3-2-日期和时间类型"><a href="#3-2-日期和时间类型" class="headerlink" title="3.2 日期和时间类型"></a>3.2 日期和时间类型</h3><p>表示时间值的日期和时间类型为 DATETIME、DATE、TIMESTAMP、TIME 和 YEAR。 每个时间类型有一个有效值范围和一个”零”值，当指定不合法的 MySQL 不能表示的值时使用”零”值。 TIMESTAMP 类型有专有的自动更新特性，将在后面描述。</p>
<p><a href="/img/mysql/%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B.png" class="lazyload"></a></p>
<p><strong>最常用: datatime 类型.</strong></p>
<h3 id="3-3-字符串类型"><a href="#3-3-字符串类型" class="headerlink" title="3.3 字符串类型"></a>3.3 字符串类型</h3><p>字符串类型指 CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM 和 SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。 CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。 BINARY 和 VARBINARY 类类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。 BLOB 是一个二进制大对象，可以容纳可变数量的数据。有 4 种 BLOB 类型：TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们只是可容纳值的最大长度不同。 有 4 种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。这些对应 4 种 BLOB 类型，有相同的最大长度和存储需求。</p>
<p><a href="/img/mysql/%E5%AD%97%E7%AC%A6%E4%B8%B2.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/img/mysql/%E5%AD%97%E7%AC%A6%E4%B8%B2.png" class="lazyload"></a></p>
<p><strong>最常用的: char, varchar 和 text 类型.</strong></p>
<blockquote>
<p>总结常用的类型：</p>
<p>int：整型</p>
<p>double：浮点型，例如 double(5,2)表示最多 5 位，其中必须有 2 位小数，即最大值：999.99</p>
<p>decimal：浮点型，不会出现精度缺失问题，比如金钱。</p>
<p>char：固定长度字符串类型：最大长度：char(255)</p>
<p>varchar：可变长度字符串类型：最大长度：varchar(65535)</p>
<p>text(clob)：字符串类型，存储超大文本。</p>
<p>blob：字节类型，最大 4G</p>
<p>date：日期类型，格式为：yyyy-MM-dd</p>
<p>time：时间类型：格式为：hh:mm:ss</p>
<p>timestamp：时间戳</p>
<p>datatime</p>
</blockquote>
<h2 id="四、表的基本操作"><a href="#四、表的基本操作" class="headerlink" title="四、表的基本操作"></a>四、表的基本操作</h2><p>MySQL 不仅用于表数据操纵，而且还可以用来执行数据库和表的所有操作，包括表本身的创建和处理。</p>
<p><strong>数据库中存储的是表(table), 表中存储的是一行行的数据.</strong></p>
<h3 id="4-1-查看当前数据库中的所有表"><a href="#4-1-查看当前数据库中的所有表" class="headerlink" title="4.1 查看当前数据库中的所有表"></a>4.1 查看当前数据库中的所有表</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure></div>

<p>注意: <code>tables</code>后面有个<code>s</code></p>
<h3 id="4-2-创建表"><a href="#4-2-创建表" class="headerlink" title="4.2 创建表"></a>4.2 创建表</h3><p>通用语法：<strong>CREATE TABLE table_**</strong>name (column_name column_type);**</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">CREATE TABLE [IF NOT EXISTS] 表名(</span><br><span class="line">	列名 列类型(长度) 约束 默认值,</span><br><span class="line">  	列名 列类型(长度) 约束 默认值,</span><br><span class="line">  	...</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">create table student(id int auto_increament primary key, name varchar(16) not null, age int, sex char(1));</span><br></pre></td></tr></table></figure></div>

<p>在这里，一些数据项需要解释：</p>
<ul>
<li>字段使用 NOT NULL，是因为我们不希望这个字段的值为 NULL。 因此，如果用户将尝试创建具有 NULL 值的记录，那么 MySQL 会产生错误。</li>
<li>字段的 AUTO_INCREMENT 属性告诉 MySQL 自动增加 id 字段下一个可用编号。</li>
<li>DEFAULT 设置默认值。</li>
<li>关键字 PRIMARY KEY 用于定义此列作为主键。可以使用逗号分隔多个列来定义主键。</li>
</ul>
<p>练习：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table test_table( test_id INT NOT NULL AUTO_INCREMENT, test_title VARCHAR(100) NOT NULL, test_author VARCHAR(40) NOT NULL DEFAULT &#39;larry&#39;, test_date DATE, PRIMARY KEY ( test_id ) );</span><br></pre></td></tr></table></figure></div>

<p><a href="/img/mysql/07%E5%BB%BA%E8%A1%A8.jpg" data-fancybox="group" data-caption="07建表" class="fancybox"><img alt="07建表" title="07建表" data-src="/img/mysql/07%E5%BB%BA%E8%A1%A8.jpg" class="lazyload"></a></p>
<h3 id="4-3-查看表结构"><a href="#4-3-查看表结构" class="headerlink" title="4.3 查看表结构"></a>4.3 查看表结构</h3><p>通用语法：<strong>desc 表名;</strong></p>
<blockquote>
<p>describe tableName</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc 表名;</span><br></pre></td></tr></table></figure></div>

<h3 id="4-4-查看表的创建语句"><a href="#4-4-查看表的创建语句" class="headerlink" title="4.4 查看表的创建语句"></a>4.4 查看表的创建语句</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show create table 表名;</span><br></pre></td></tr></table></figure></div>

<h3 id="4-5-修改表"><a href="#4-5-修改表" class="headerlink" title="4.5 修改表"></a>4.5 修改表</h3><p>通用语法：<strong>ALTER TALBE 表名….</strong></p>
<p><strong>1.添加字段</strong> :add</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 add(</span><br><span class="line">	列名 列类型,</span><br><span class="line">  	列名 列类型,</span><br><span class="line">  	...</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p><strong>修改表</strong></p>
<p><strong>2.修改列类型</strong>:modify</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 modify</span><br><span class="line">	列名 列类型;</span><br></pre></td></tr></table></figure></div>

<p>注意：如果被修改的列已经存在数据，那么新的类型可能会影响到已存在的数据</p>
<p><strong>3.修改列名</strong>:change</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 change</span><br><span class="line">	原列名 新列名 列类型;</span><br></pre></td></tr></table></figure></div>

<p><strong>4.删除列</strong>:drop</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 drop</span><br><span class="line">	列名;</span><br></pre></td></tr></table></figure></div>

<p><strong>5.更改表的名称</strong>:rename to</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rename table 原表名 to 新表名;</span><br><span class="line">alter table 原表名 rename to 新表名;</span><br></pre></td></tr></table></figure></div>

<h3 id="4-6-删除表"><a href="#4-6-删除表" class="headerlink" title="4.6 删除表"></a>4.6 删除表</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop table [if exists] 表名;</span><br></pre></td></tr></table></figure></div>

<h3 id="4-7-扩展-复制表中的数据-仅复制数据不复制表的结构"><a href="#4-7-扩展-复制表中的数据-仅复制数据不复制表的结构" class="headerlink" title="4.7 [扩展]复制表中的数据(仅复制数据不复制表的结构)"></a>4.7 [扩展]复制表中的数据(仅复制数据不复制表的结构)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table 表名2 as select * from 表名1;</span><br></pre></td></tr></table></figure></div>

<h2 id="五、操纵表中的数据"><a href="#五、操纵表中的数据" class="headerlink" title="五、操纵表中的数据"></a>五、操纵表中的数据</h2><p>对于数据表进行增伤改查(也叫 CRUD)。</p>
<p>DML 语言：增删改</p>
<p>DQL 语言：查</p>
<blockquote>
<p>crud 是指在做计算处理时的增加(Create)、读取查询(Retrieve)、更新(Update)和删除(Delete)几个单词的首字母简写。crud 主要被用在描述软件系统中数据库或者持久层的基本操作功能。</p>
</blockquote>
<h3 id="5-1-查询数据"><a href="#5-1-查询数据" class="headerlink" title="5.1 查询数据"></a>5.1 查询数据</h3><p>查询数据的操作是最复杂, 后面专门细讲.<br>今天只使用最简单的.</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from 表名;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="5-2-添加数据"><a href="#5-2-添加数据" class="headerlink" title="5.2 添加数据"></a>5.2 添加数据</h3><p>增加数据的方式有多种:</p>
<blockquote>
<p>注意：在数据库中所有的字符串类型，必须使用单引，不能使用双引。日期类型也要使用单引。</p>
</blockquote>
<h4 id="5-2-1-全列插入"><a href="#5-2-1-全列插入" class="headerlink" title="5.2.1 全列插入"></a>5.2.1 全列插入</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into 表名 values(值1, 值2,...);</span><br></pre></td></tr></table></figure></div>

<p>说明:</p>
<ol>
<li>全列插入的时候需要每一列的数据都要添加上去.</li>
<li>对自动增长的数据, 在全列插入的时候需要占位处理, 一般使用 0 来占位.但是最终的值以实际为准.</li>
</ol>
<h4 id="5-2-2-缺省插入"><a href="#5-2-2-缺省插入" class="headerlink" title="5.2.2 缺省插入"></a>5.2.2 缺省插入</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into 表名(列1, 列2, ...) values(值1, 值2, ...);</span><br></pre></td></tr></table></figure></div>

<p>说明:</p>
<ol>
<li>插入的时候,<code>not null</code>和<code>primary key</code>的列必须赋值, 其他的列根据情况来赋值.如果没有赋值则会使用默认值.</li>
</ol>
<h4 id="5-2-3-同时插入多条数据"><a href="#5-2-3-同时插入多条数据" class="headerlink" title="5.2.3 同时插入多条数据"></a>5.2.3 同时插入多条数据</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into 表名 values(值1, 值2,...), (值1, 值2,...),...;</span><br></pre></td></tr></table></figure></div>

<p>或者</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into 表名(列1, 列2, ...) values(值1, 值2, ...), (值1, 值2, ...), ...;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="5-3-修改数据-更新数据"><a href="#5-3-修改数据-更新数据" class="headerlink" title="5.3 修改数据(更新数据)"></a>5.3 修改数据(更新数据)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update 表名 set 列1&#x3D;值1,列2&#x3D;值2,... [where 条件]</span><br><span class="line">例如:</span><br><span class="line">update stus set sex&#x3D;&#39;男&#39;,age&#x3D;100 where sex is null;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>条件(条件是可选的)</p>
<ol>
<li>条件必须是 boolean 类型的值或者表达式</li>
<li>运算符：=,!=,&lt;&gt;,&gt;,&lt;,&gt;=,&lt;=,between..and, in(…),or ,and ,not, is null，is not null</li>
<li>is null 不是 = null(永远是 false)</li>
</ol>
</blockquote>
<h3 id="5-4-删除数据"><a href="#5-4-删除数据" class="headerlink" title="5.4 删除数据"></a>5.4 删除数据</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from 表名 [where 条件]</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="六、约束-constraint"><a href="#六、约束-constraint" class="headerlink" title="六、约束(constraint)"></a>六、约束(constraint)</h2><p>当创建数据表的时候，为某一个字段设置约束，表示限定该列的数值内容。也可以通过修改表结构添加约束</p>
<h3 id="6-1-默认值：default"><a href="#6-1-默认值：default" class="headerlink" title="6.1 默认值：default"></a>6.1 默认值：default</h3><h3 id="6-2-非空约束：not-null"><a href="#6-2-非空约束：not-null" class="headerlink" title="6.2 非空约束：not null"></a>6.2 非空约束：not null</h3><p>如果某个字段添加了非空约束，那么该字段的数值不能为 null，对于 mysql 而言，表示什么都没有，未知的。不是 0，也不是空””，更不是”NULL”。</p>
<p>NUll</p>
<p>​ 0,””,”NULL”</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table stu (</span><br><span class="line">	sid int ,</span><br><span class="line">	sname varchar(20) not null, # 定义sname字段值不能为空</span><br><span class="line">	age int,</span><br><span class="line">	gender varchar(10)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>删除非空约束：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sname varchar(20);</span><br></pre></td></tr></table></figure></div>

<p>添加非空约束：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sname  varchar(20) not null;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>该列已有的数据不能有 null 数值。</p>
</blockquote>
<h3 id="6-3-唯一性约束：unique"><a href="#6-3-唯一性约束：unique" class="headerlink" title="6.3 唯一性约束：unique"></a>6.3 唯一性约束：unique</h3><p>唯一性约束强调所在的字段所有的数值都是唯一的。不允许重复。允许空值(多个)。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table stu (</span><br><span class="line">	sid int primary key auto_increment,</span><br><span class="line">	sname varchar(20) unique, # 定义sname字段值必须唯一</span><br><span class="line">	age int,</span><br><span class="line">	gender varchar(10)</span><br><span class="line">);</span><br><span class="line">或者,使用constraint 约束名 unique 字段。</span><br><span class="line">create table stu (</span><br><span class="line">	sid int auto_increment,</span><br><span class="line">	sname varchar(20),</span><br><span class="line">	age int,</span><br><span class="line">	gender varchar(10),</span><br><span class="line">  	[constraint ] unique (sname)  # 指明name字段唯一</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>删除唯一约束：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sname varchar(20);</span><br></pre></td></tr></table></figure></div>

<p>添加唯一约束：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sname  varchar(20) not null;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>该列已有的数据不能有 null 数值。</p>
</blockquote>
<p>为已有的字段设置约束<br>alter table 表名 modify 字段 约束</p>
<p>添加新的字段，带约束</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 add 字段 数据类型 约束</span><br></pre></td></tr></table></figure></div>

<p>先将已有的字段删除，重新添加带约束的。<br>alter table 表名 drop column 列名<br>alter table 表名 add 列名 数据类型 约束</p>
<h3 id="6-4-主键约束：primary-key。"><a href="#6-4-主键约束：primary-key。" class="headerlink" title="6.4 主键约束：primary key。"></a>6.4 主键约束：primary key。</h3><p>主键约束：要求该字段数值不允许空，而且数值唯一。(not null+unique)</p>
<p>主键约束用于唯一的标识表中的每一个行记录的。一个表中最多只能有一个主键约束。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table stu (</span><br><span class="line">sid int primary key auto_increment,  # 定义sid作为stu表的主键</span><br><span class="line">sname varchar(20),</span><br><span class="line">age int,</span><br><span class="line">gender varchar(10)</span><br><span class="line">);</span><br><span class="line">或者,使用constraint 约束名 primary key 字段。</span><br><span class="line">create table stu (</span><br><span class="line">sid int auto_increment,</span><br><span class="line">sname varchar(20),</span><br><span class="line">age int,</span><br><span class="line">gender varchar(10),</span><br><span class="line">	[constraint [sid_pk]] primary key (sid)  # 指明sid作为stu表的主键</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>删除主键：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu drop primary key;</span><br></pre></td></tr></table></figure></div>

<p>添加主键：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table teachers add primary key(id);</span><br></pre></td></tr></table></figure></div>

<p><strong>主键自增：</strong> auto_increment</p>
<p>要求该字段数值不允许空，而且数值唯一。所以我们通常会指定主键类型为整型，然后设置其自动增长，这样可以保证在插入数据时主键列的唯一和非空特性。</p>
<p>修改表时设置主键自动增长：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sid  int auto_increment;</span><br></pre></td></tr></table></figure></div>

<p>修改表时删除主键自动增长：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table stu modify sid  int;</span><br></pre></td></tr></table></figure></div>

<h3 id="6-5-外键约束：foreign-key，"><a href="#6-5-外键约束：foreign-key，" class="headerlink" title="6.5 外键约束：foreign key，"></a>6.5 外键约束：foreign key，</h3><h4 id="6-5-1-外键"><a href="#6-5-1-外键" class="headerlink" title="6.5.1 外键"></a>6.5.1 外键</h4><ul>
<li><p>思考：怎么保证关系列数据的有效性呢？任何整数都可以吗？比如一个班级表中有班级编号，班级名称，班级位置。还有一个学生表，有学生编号，学生姓名，学生 性别，以及班级编号等。</p>
</li>
<li><p>答：必须是学生表中班级编号列存在的数据，可以通过外键约束进行数据的有效性验证</p>
</li>
</ul>
<p><strong>外键作用数据完整性。</strong></p>
<p>班级表可以叫做父表(主表)：class，字段 classno，该表的主键</p>
<p>学生表可以叫做子表(从表)：student，字段 sid 是该表的主键，classno 是该表的外键</p>
<p>父表：department，字段 deptno，该表的主键<br>子表：employee，字段 empno，该表的主键，deptno，该表的外键</p>
<p><strong>子表的外键是父表的主键。</strong></p>
<ol>
<li>当对于子表插入数据，外键字段的数值不能随便插入，而取决于父表的主键数值。</li>
<li>对于父表的删除操作，要看子表中是否有记录引用该数值。</li>
</ol>
<h4 id="6-5-2-外键的设置"><a href="#6-5-2-外键的设置" class="headerlink" title="6.5.2 外键的设置"></a>6.5.2 外键的设置</h4><p>方法一：在创建子表的时候，直接标明外键。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置外键语法：</span><br><span class="line">  references 父表(主键);</span><br><span class="line">  constraint classno_FK  foreign key (classno) references class(classno);</span><br><span class="line"></span><br><span class="line">创建数据表</span><br><span class="line">create table scores(</span><br><span class="line">	sid int(4) primary key auto_increment,</span><br><span class="line">	sname varchar(20),</span><br><span class="line">	sage int(3),</span><br><span class="line">	classno int(4),</span><br><span class="line">	constraint stu_classno foreign key(classno) references class(classno) on delete cascade,</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>方法二：使用 alter 语句今天添加外键</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table student add constraint stu_classno foreign key(classno) references class(classno);</span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table student add constraint stu_classno foreign key(classno) references class(classno) on delete cascade;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>此时插入或者修改数据时，如果 classno 的值在 student 表中不存在则会报错</li>
</ul>
<p>删除外键：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table student drop foreign key stu_classno;</span><br></pre></td></tr></table></figure></div>

<h4 id="6-5-3-外键的级联操作"><a href="#6-5-3-外键的级联操作" class="headerlink" title="6.5.3 外键的级联操作"></a>6.5.3 外键的级联操作</h4><ul>
<li><p>在删除 class 表的数据时，如果这个 classno 值在 student 中已经存在，则会抛异常</p>
</li>
<li><p>推荐使用逻辑删除，还可以解决这个问题</p>
</li>
<li><p>可以创建表时指定级联操作，也可以在创建表后再修改外键的级联操作</p>
</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">语法：</span><br><span class="line"></span><br><span class="line">on delete cascade,删除父表的时候，子表的数据直接删除，级联删除</span><br><span class="line"></span><br><span class="line">on delete set null，删除父表的时候，子表的数据置null。</span><br></pre></td></tr></table></figure></div>

<ul>
<li>级联操作的类型包括：<ul>
<li>restrict(限制)：默认值，抛异常</li>
<li>cascade(级联)：如果主表的记录删掉，则从表中相关联的记录都将被删除</li>
<li>set null：将外键设置为空</li>
<li>no action：什么都不做</li>
</ul>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">wangguangatap</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wangguangatap.github.io/2020/01/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/">https://wangguangatap.github.io/2020/01/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://wangguangatap.github.io/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wangguangatap.github.io">星脉</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL    </a></div><div class="post_share"><div class="social-share" data-image="/img/mysql/mysql.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/01/27/Go%E8%AF%AD%E8%A8%80%E5%8F%8D%E5%B0%84/"><img class="prev_cover lazyload" data-src="/img/golang/golang.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Go语言反射</span></div></a></div><div class="next-post pull_right"><a href="/2020/01/27/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="next_cover lazyload" data-src="/img/mysql/mysql.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>(二).MySQL学习笔记</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/01/27/MySQL学习笔记/" title="(二).MySQL学习笔记"><img class="relatedPosts_cover lazyload"data-src="/img/mysql/mysql.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-27</div><div class="relatedPosts_title">(二).MySQL学习笔记</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/27/MySQL查询和复杂查询/" title="(三).MySQL查询"><img class="relatedPosts_cover lazyload"data-src="/img/mysql/mysql.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-27</div><div class="relatedPosts_title">(三).MySQL查询</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/27/MySQL学习笔记2/" title="(四).MySQL学习笔记"><img class="relatedPosts_cover lazyload"data-src="/img/mysql/mysql.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-27</div><div class="relatedPosts_title">(四).MySQL学习笔记</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/27/MySQL优化/" title="MySQL优化"><img class="relatedPosts_cover lazyload"data-src="/img/mysql/mysql.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-27</div><div class="relatedPosts_title">MySQL优化</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By wangguangatap</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>